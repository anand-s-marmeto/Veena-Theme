<link rel="stylesheet" href="{{ 'new-arrivals.css' | asset_url }}">

{% comment %} <script src="{{ 'new-arrivals.js' |  asset_url }}" defer></script> {% endcomment %}
{%  style  %} 
.padding-{{ section.id }} {
    padding-top: {{ section.settings.padding_top | divided_by: 2 }}px;
    padding-bottom: {{ section.settings.padding_bottom | divided_by: 2 }}px;
  }

  @media (min-width: 750px) {
    .padding-{{ section.id }} {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{% endstyle %} 

{% capture slider %}
  {
      "arrows": true,
      "pagination": false,
      "perPage": 3,
      "perMove":1,
      "breakpoints":{
        "767": {
          "perPage": 2
        }
      },
      "gap":"20px"
  }
{% endcapture %}

<div class="new-arrivals padding-{{ section.id }}">
  <div class="page-width">
    <div class="new-arrivals__header-section">
      {% if section.settings.heading != blank %}
      <h2 class="heading h0">{{ section.settings.heading }}</h2>
      {% endif %}
      {% if section.settings.button_url != blank and section.settings.button_text != blank %}
      <a href="{{ section.settings.button_url }}" class="header-button"><span>{{ section.settings.button_text }}</span></a>
      {% endif %}
    </div>

    <div class="new-arrivals__products-section">
      <div class="new-arrivals__featured-product">
        <div class="product-image">
          {% if section.settings.desktop_image != blank %}
            {%  render 'responsive-picture' , class:"prod-image" , desktopImage: section.settings.desktop_image , mobileImage : section.settings.mobile_image %} 
          {% endif %}
        </div>
        <div class="featured-product-info">
          {% if section.settings.featured_tag != blank %}
            <ul class="tag featured-product-tag">
              <li>{{ section.settings.featured_tag }}</li>
            </ul>
          {% endif %}
          {% if section.settings.featured_title!=blank %}
            <h3 class="content_heading h2">{{ section.settings.featured_title }}</h3>
          {% endif %}
          {% if section.settings.featured_button_link != blank and section.settings.featured_button_text != blank %}
          <a href="{{ section.settings.featured_button_link }}" class="featured_button_link">{{ section.settings.featured_button_text }}</a>
          {% endif %}
        </div>
      </div>
      <div class="new-arrivals__product-slider">
        <my-splide data-slider-options='{{ slider }}'>
          <div class="splide">
            <div class="splide__arrows splide__arrows--ltr">
              <button class="splide__arrow splide__arrow--prev" type="button" disabled="" aria-label="Previous slide" aria-controls="splide03-track">
                <span>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" width="40" height="40" focusable="false"><path d="m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z"></path>
                </svg>
                </span>
              </button>
              <button class="splide__arrow splide__arrow--next" type="button" aria-label="Next slide" aria-controls="splide03-track">
                <span>
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" width="40" height="40" focusable="false">
                  <path d="m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z"></path>
                  </svg>
                </span>
              </button>
            </div>
            <div class="splide__track">
              <div class="splide__list">
                {% for product in section.settings.product_list %}
                  <div class="splide__slide">
                    {% render 'product-card', product: product , section_id: section.id %}
                  </div>
                {%  else  %}
                  {% for i in (1..5) %}
                    <div class="splide__slide">
                      {{ 'product-' |  append: i |  placeholder_svg_tag }}
                    </div>
                  {% endfor %}
                {% endfor %}
              </div>
            </div>
          </div>
        </my-splide>
      </div>
    </div>
  </div>
</div>

{%  schema  %} 
   {
    "name":"New arrivals",
    "tag": "section",
    "settings": [
      {
        "type": "text",
        "id": "heading",
        "label": "Heading"
      },
      {
        "type": "url",
        "id": "button_url",
        "label": "Button url"
      },
      {
        "type": "text",
        "id": "button_text",
        "label": "Button text"
      },
      {
        "type": "header",
        "content":"Settings for featured image"
      },
      {
        "type": "image_picker",
        "id": "desktop_image",
        "label": "Desktop Image"
      },
      {
        "type": "image_picker",
        "id": "mobile_image",
        "label": "Mobile Image"
      },
      {
        "type": "text",
        "id": "featured_tag",
        "label": "Tag",
        "info": "Featured image tag"
      },
      {
        "type": "text",
        "id": "featured_title",
        "label": "Title",
        "info":"Featured image title"
      },
      {
        "type": "url",
        "id": "featured_button_link",
        "label": "button_link",
        "info":"Featured image button url"
      },
      {
        "type": "text",
        "id": "featured_button_text",
        "label": "Button text",
        "info": "Featured image button text"
      },
      {
        "type": "product_list",
        "id": "product_list",
        "label":"Products",
        "info": "Enter the products for the grid/slider."
      },
      {
        "type": "header",
        "content":"Section padding"
      },
      {
        "type": "range",
        "id": "padding_top",
        "min": 0,
        "max": 100,
        "step": 1,
        "unit": "px",
        "label": "Padding top",
        "default": 36
      },
      {
        "type": "range",
        "id": "padding_bottom",
        "min": 0,
        "max": 100,
        "step": 1,
        "unit": "px",
        "label": "Padding bottom",
        "default": 36
      }

    ],
    "presets": [
      {
        "name": "New arrivals"
      }
    ]
  }


{% endschema %} 